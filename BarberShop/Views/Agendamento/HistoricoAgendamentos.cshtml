@model IEnumerable<BarberShop.Domain.Entities.Agendamento>

<h2 class="text-light">Histórico de Agendamentos</h2>

<div class="container-fluid" style="padding: 20px;">
    <!-- Tabela para telas maiores -->
    <div class="table-responsive d-none d-md-block" style="max-height: 400px; overflow-y: auto;">
        <table class="table table-bordered table-dark table-striped table-hover table-sm">
            <thead class="text-center">
                <tr>
                    <th>Data e Hora</th>
                    <th>Barbeiro</th>
                    <th>Serviços</th>
                    <th>Valor Total</th>
                    <th>Status</th>
                    <th>Forma de Pagamento</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var agendamento in Model)
                {
                    <tr>
                        <td class="align-middle text-center">@agendamento.DataHora.ToString("dd/MM/yyyy HH:mm")</td>
                        <td class="align-middle text-center">@agendamento.Barbeiro.Nome</td>
                        <td class="align-middle">
                            <ul class="list-unstyled">
                                @foreach (var servico in agendamento.AgendamentoServicos)
                                {
                                    <li>@servico.Servico.Nome - @servico.Servico.Preco.ToString("C")</li>
                                }
                            </ul>
                        </td>
                        <td class="align-middle text-center">@agendamento.AgendamentoServicos.Sum(s => s.Servico.Preco).ToString("C")</td>
                        <td class="align-middle text-center">
                            @if (agendamento.Status == BarberShop.Domain.Entities.StatusAgendamento.Pendente)
                            {
                                <span data-bs-toggle="tooltip" title="Pendente">
                                    <i class="fas fa-clock text-warning"></i>
                                </span>
                            }
                            else if (agendamento.Status == BarberShop.Domain.Entities.StatusAgendamento.Confirmado)
                            {
                                <span data-bs-toggle="tooltip" title="Confirmado">
                                    <i class="fas fa-check text-success"></i>
                                </span>
                            }
                            else if (agendamento.Status == BarberShop.Domain.Entities.StatusAgendamento.Cancelado)
                            {
                                <span data-bs-toggle="tooltip" title="Cancelado">
                                    <i class="fas fa-times text-danger"></i>
                                </span>
                            }
                            else if (agendamento.Status == BarberShop.Domain.Entities.StatusAgendamento.Concluido)
                            {
                                <span data-bs-toggle="tooltip" title="Concluído">
                                    <i class="fas fa-check-circle text-info"></i>
                                </span>
                            }
                        </td>
                        <td class="align-middle text-center">
                            @if (agendamento.FormaPagamento == "creditCard")
                            {
                                <i class="fas fa-credit-card text-primary"></i>
                            }
                            else if (agendamento.FormaPagamento == "pix")
                            {
                                <i class="fas fa-qrcode text-success"></i>
                            }
                            else if (agendamento.FormaPagamento == "transfer")
                            {
                                <i class="fas fa-university text-info"></i>
                            }
                            else
                            {
                                @agendamento.FormaPagamento
                            }
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <!-- Cards para dispositivos móveis -->
    <div class="d-md-none">
        <!-- Primeiro Card com Margin-Top Adicional -->
        <div class="card bg-dark text-light mb-3" style="margin-top: 3800px;">
            <div class="card-body">
                <h5 class="card-title">@Model.First().DataHora.ToString("dd/MM/yyyy HH:mm")</h5>
                <p class="card-text"><strong>Barbeiro:</strong> @Model.First().Barbeiro.Nome</p>
                <p class="card-text"><strong>Serviços:</strong></p>
                <ul>
                    @foreach (var servico in Model.First().AgendamentoServicos)
                    {
                        <li>@servico.Servico.Nome - @servico.Servico.Preco.ToString("C")</li>
                    }
                </ul>
                <p class="card-text"><strong>Valor Total:</strong> @Model.First().AgendamentoServicos.Sum(s => s.Servico.Preco).ToString("C")</p>
                <p class="card-text">
                    <strong>Forma de Pagamento:</strong>
                    @if (Model.First().FormaPagamento == "creditCard")
                    {
                        <i class="fas fa-credit-card text-primary"></i>
                    }
                    else if (Model.First().FormaPagamento == "pix")
                    {
                        <i class="fas fa-qrcode text-success"></i>
                    }
                    else if (Model.First().FormaPagamento == "transfer")
                    {
                        <i class="fas fa-university text-info"></i>
                    }
                    else
                    {
                        @Model.First().FormaPagamento
                    }
                </p>
                <p class="card-text">
                    <strong>Status:</strong>
                    @if (Model.First().Status == BarberShop.Domain.Entities.StatusAgendamento.Pendente)
                    {
                        <span><i class="fas fa-clock text-warning"></i> Pendente</span>
                    }
                    else if (Model.First().Status == BarberShop.Domain.Entities.StatusAgendamento.Confirmado)
                    {
                        <span><i class="fas fa-check text-success"></i> Confirmado</span>
                    }
                    else if (Model.First().Status == BarberShop.Domain.Entities.StatusAgendamento.Cancelado)
                    {
                        <span><i class="fas fa-times text-danger"></i> Cancelado</span>
                    }
                    else if (Model.First().Status == BarberShop.Domain.Entities.StatusAgendamento.Concluido)
                    {
                        <span><i class="fas fa-check-circle text-info"></i> Concluído</span>
                    }
                </p>
            </div>
        </div>

        <!-- Outros Cards -->
        @foreach (var agendamento in Model.Skip(1))
        {
            <div class="card bg-dark text-light mb-3">
                <div class="card-body">
                    <h5 class="card-title">@agendamento.DataHora.ToString("dd/MM/yyyy HH:mm")</h5>
                    <p class="card-text"><strong>Barbeiro:</strong> @agendamento.Barbeiro.Nome</p>
                    <p class="card-text"><strong>Serviços:</strong></p>
                    <ul>
                        @foreach (var servico in agendamento.AgendamentoServicos)
                        {
                            <li>@servico.Servico.Nome - @servico.Servico.Preco.ToString("C")</li>
                        }
                    </ul>
                    <p class="card-text"><strong>Valor Total:</strong> @agendamento.AgendamentoServicos.Sum(s => s.Servico.Preco).ToString("C")</p>
                    <p class="card-text">
                        <strong>Forma de Pagamento:</strong>
                        @if (agendamento.FormaPagamento == "creditCard")
                        {
                            <i class="fas fa-credit-card text-primary"></i>
                        }
                        else if (agendamento.FormaPagamento == "pix")
                        {
                            <i class="fas fa-qrcode text-success"></i>
                        }
                        else if (agendamento.FormaPagamento == "transfer")
                        {
                            <i class="fas fa-university text-info"></i>
                        }
                        else
                        {
                            @agendamento.FormaPagamento
                        }
                    </p>
                    <p class="card-text">
                        <strong>Status:</strong>
                        @if (agendamento.Status == BarberShop.Domain.Entities.StatusAgendamento.Pendente)
                        {
                            <span><i class="fas fa-clock text-warning"></i> Pendente</span>
                        }
                        else if (agendamento.Status == BarberShop.Domain.Entities.StatusAgendamento.Confirmado)
                        {
                            <span><i class="fas fa-check text-success"></i> Confirmado</span>
                        }
                        else if (agendamento.Status == BarberShop.Domain.Entities.StatusAgendamento.Cancelado)
                        {
                            <span><i class="fas fa-times text-danger"></i> Cancelado</span>
                        }
                        else if (agendamento.Status == BarberShop.Domain.Entities.StatusAgendamento.Concluido)
                        {
                            <span><i class="fas fa-check-circle text-info"></i> Concluído</span>
                        }
                    </p>
                </div>
            </div>
        }
    </div>
</div>

<!-- Legenda para os ícones -->
<div class="mt-4">
    <h5 class="text-light">Legenda:</h5>
    <ul class="list-inline">
        <li class="list-inline-item">
            <i class="fas fa-clock text-warning"></i> Pendente
        </li>
        <li class="list-inline-item">
            <i class="fas fa-check text-success"></i> Confirmado
        </li>
        <li class="list-inline-item">
            <i class="fas fa-times text-danger"></i> Cancelado
        </li>
        <li class="list-inline-item">
            <i class="fas fa-check-circle text-info"></i> Concluído
        </li>
        <li class="list-inline-item">
            <i class="fas fa-credit-card text-primary"></i> Cartão de Crédito
        </li>
        <li class="list-inline-item">
            <i class="fas fa-qrcode text-success"></i> PIX
        </li>
        <li class="list-inline-item">
            <i class="fas fa-university text-info"></i> Transferência Bancária
        </li>
    </ul>
</div>

<!-- Botão de Voltar -->
<div class="mt-4">
    <button class="btn btn-secondary" onclick="history.back()">Voltar</button>
</div>
